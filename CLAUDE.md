# クォータービューシューティングゲーム - プロジェクト解析

## プロジェクト概要
このプロジェクトは、HTML5 CanvasとJavaScriptで実装されたクォータービュー（見下ろし型）のシューティングゲームです。疑似3D効果により奥行き感のあるゲームプレイを実現しています。

## ファイル構成
```
quarter-view-stg/
├── index.html      # メインHTMLファイル
├── styles.css      # スタイルシート
├── game.js         # ゲームロジック
├── README.md       # プロジェクト説明
├── .gitignore      # Git除外設定
└── CLAUDE.md       # このファイル（プロジェクト解析）
```

## 技術的な実装詳細

### ゲームアーキテクチャ
- **Canvas API**: 800x600pxのキャンバスで描画
- **ゲームループ**: requestAnimationFrameによる60FPS動作
- **状態管理**: 3つの状態（TITLE, PLAYING, GAMEOVER）を管理

### パースペクティブ（疑似3D）システム
1. **消失点**: 画面上部中央 (400, 50) に設定
2. **スケーリング**: Y座標に基づく動的なサイズ変更（0.3〜1.5倍）
3. **収束率**: オブジェクトタイプごとに異なる収束率を適用
   - 弾: 0.7（強い収束）
   - 敵: 0.3（中程度の収束）
   - 背景の星: 0.1（弱い収束）

### クラス設計

#### Bulletクラス
- 弾の管理を担当
- パースペクティブに応じた軌道計算
- 衝突判定用のgetBounds()メソッド

#### Enemyクラス
- 2種類の敵タイプをサポート
  - Type 0: 直進タイプ
  - Type 1: 左右に揺れながら進むタイプ
- パースペクティブ対応の移動処理

#### Particleクラス
- 爆発エフェクト用のパーティクル管理
- ランダムな色と速度で拡散

### 入力処理
- キーボード: WASD/矢印キー + スペースキー
- マウス: クリックによる状態遷移
- イベントリスナーはグローバルスコープで定義

### 衝突判定
- 矩形ベースの衝突判定（AABB）
- パースペクティブスケールを考慮したバウンディングボックス

## 改善のポイント

### 現在の実装の良い点
1. **モジュール性**: クラスベースの設計で拡張しやすい
2. **パフォーマンス**: 効率的な描画と更新処理
3. **視覚効果**: パースペクティブによる没入感のある表現

### 今後の改善提案
1. **サウンド機能**: Web Audio APIによる効果音とBGM
2. **難易度調整**: 時間経過による敵の速度・出現率の増加
3. **パワーアップシステム**: アイテム取得による強化
4. **モバイル対応**: タッチ操作のサポート
5. **ステージシステム**: 複数のステージとボス戦
6. **スコアランキング**: LocalStorageを使用したハイスコア記録

### パフォーマンス最適化の余地
1. **オブジェクトプール**: 弾や敵の再利用によるGC削減
2. **描画最適化**: オフスクリーンキャンバスの活用
3. **衝突判定の最適化**: 空間分割によるチェック数削減

## コードスタイル
- ES6クラス構文を使用
- 関数型プログラミングとオブジェクト指向の混合
- 明確な命名規則（camelCase）
- 適切なコメントによる説明