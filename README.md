# クォータービューシューティング

## 現在の状況
- **ゲーム状態**: 完全に動作するクォータービューシューティングゲームが完成
- **タイトル画面・ゲームプレイ・ゲームオーバー機能**: 実装済み
- **主要問題**: 解決済み（イベントリスナーとstartGame関数の呼び出し問題を修正）

## 実装済み機能一覧

### ✅ 完成している機能
1. **ゲーム状態管理**
   - タイトル画面
   - ゲームプレイ画面
   - ゲームオーバー画面
   - 状態間の遷移

2. **パースペクティブ3D効果**
   - 奥行き感のあるクォータービュー
   - 消失点への収束効果
   - Y座標に応じたスケーリング
   - パースペクティブ速度調整

3. **プレイヤー機能**
   - WASD/矢印キーでの移動
   - 画面端での移動制限
   - 左右移動時の機体傾き
   - スペースキーでのツインショット弾発射

4. **敵システム**
   - 2種類の敵タイプ（直進・左右揺れ）
   - パースペクティブに合わせた移動
   - ランダム生成システム
   - 衝突判定

5. **弾システム**
   - ツインショット（左右2発同時）
   - パースペクティブに合わせた軌道
   - 敵との衝突判定

6. **エフェクト**
   - 爆発パーティクルエフェクト
   - 星空背景（パースペクティブ対応）
   - UI表示/非表示切り替え

7. **ゲームフロー**
   - スコアシステム
   - 被弾によるゲームオーバー
   - リトライ機能
   - マウス・キーボード両対応

## 技術的な実装詳細

### パースペクティブ計算
- **消失点**: 画面上部中央 (400, 50)
- **スケール範囲**: 0.3〜1.5（上部から下部へ）
- **収束率**: 弾=0.7、敵=0.3、星=0.1

### 表示領域制限
- **ゲーム領域**: Y座標90px以下（UIエリアを避ける）
- **理由**: パースペクティブの歪みを隠すため

### クラス構造
- `Bullet`: 弾の管理
- `Enemy`: 敵の管理（タイプ0=直進、タイプ1=左右揺れ）
- `Particle`: 爆発エフェクト

### ゲーム状態
```javascript
const GameState = {
    TITLE: 'title',
    PLAYING: 'playing', 
    GAMEOVER: 'gameover'
};
```

## 動作確認済みの操作

### タイトル画面
- **任意のキー押下**: ゲーム開始
- **マウスクリック**: ゲーム開始

### ゲームプレイ中
- **WASD/矢印キー**: 自機移動
- **スペースキー**: 弾発射

### ゲームオーバー画面
- **任意のキー押下**: リトライ
- **マウスクリック**: リトライ

## 解決済みの問題
1. **イベントリスナー問題**: DOMContentLoaded内からグローバルスコープに移動して解決
2. **パースペクティブの表示問題**: 上部領域をマスクして自然な見た目に
3. **敵生成数の減少**: 生成率とUIエリア調整で解決

## 今後の拡張可能性
- ボスエネミーの追加
- パワーアップアイテム
- より複雑な敵の行動パターン
- サウンド効果
- ハイスコア記録
- ステージ制
- 背景の多様化

